!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MapboxDirections=t()}}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),r=(u=n.slice()).length,c=0;c<r;c++)u[c].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,n){function r(t){if(u===setTimeout)return setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function o(){h&&d&&(h=!1,d.length?p=d.concat(p):v=-1,p.length&&s())}function s(){if(!h){var t=r(o);h=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,h=!1,i(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var u,l,f=e.exports={};!function(){try{u=setTimeout}catch(t){u=function(){throw new Error("setTimeout is not defined")}}try{l=clearTimeout}catch(t){l=function(){throw new Error("clearTimeout is not defined")}}}();var d,p=[],h=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new a(t,e)),1!==p.length||h||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],3:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function i(t,e,n){var r=e[n];if(void 0!==r&&null!==r){if(a.call(t,n)&&(void 0===t[n]||null===t[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");a.call(t,n)&&s(r)?t[n]=o(Object(t[n]),e[n]):t[n]=r}}function o(t,e){if(t===e)return t;e=Object(e);for(var n in e)a.call(e,n)&&i(t,e,n);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)c.call(e,r[o])&&i(t,e,r[o]);return t}var s=t("is-obj"),a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(t){t=r(t);for(var e=1;e<arguments.length;e++)o(t,arguments[e]);return t}},{"is-obj":4}],4:[function(t,e,n){"use strict";e.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},{}],5:[function(t,e,n){(function(t){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||r(t)&&g.call(t)==c}function o(t){if("number"==typeof t)return t;if(i(t))return a;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var r=f.test(t);return r||d.test(t)?p(t.slice(2),r?2:8):l.test(t)?a:+t}var s="Expected a function",a=NaN,c="[object Symbol]",u=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,d=/^0o[0-7]+$/i,p=parseInt,h="object"==typeof t&&t&&t.Object===Object&&t,v="object"==typeof self&&self&&self.Object===Object&&self,y=h||v||Function("return this")(),g=Object.prototype.toString,m=Math.max,b=Math.min,_=function(){return y.Date.now()};e.exports=function(t,e,r){function i(e){var n=p,r=h;return p=h=void 0,O=e,y=t.apply(r,n)}function a(t){return O=t,g=setTimeout(l,e),E?i(t):y}function c(t){var n=t-O,r=e-(t-w);return x?b(r,v-n):r}function u(t){var n=t-w,r=t-O;return void 0===w||n>=e||n<0||x&&r>=v}function l(){var t=_();if(u(t))return f(t);g=setTimeout(l,c(t))}function f(t){return g=void 0,j&&p?i(t):(p=h=void 0,y)}function d(){var t=_(),n=u(t);if(p=arguments,h=this,w=t,n){if(void 0===g)return a(w);if(x)return g=setTimeout(l,e),i(w)}return void 0===g&&(g=setTimeout(l,e)),y}var p,h,v,y,g,w,O=0,E=!1,x=!1,j=!0;if("function"!=typeof t)throw new TypeError(s);return e=o(e)||0,n(r)&&(E=!!r.leading,v=(x="maxWait"in r)?m(o(r.maxWait)||0,e):v,j="trailing"in r?!!r.trailing:j),d.cancel=function(){void 0!==g&&clearTimeout(g),O=0,p=w=h=g=void 0},d.flush=function(){return void 0===g?y:f(_())},d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,n){(function(t){function r(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}function i(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function o(t,e){return null==t?void 0:t[e]}function s(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function a(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function u(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function l(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function f(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function d(t){var e=-1,n=t?t.length:0;for(this.__data__=new f;++e<n;)this.add(t[e])}function p(t){this.__data__=new l(t)}function h(t,e){var n=Ht(t)||R(t)?i(t.length,String):[],r=n.length,o=!!r;for(var s in t)!e&&!xt.call(t,s)||o&&("length"==s||j(s,r))||n.push(s);return n}function v(t,e){for(var n=t.length;n--;)if(N(t[n][0],e))return n;return-1}function y(t,e,n,r,i){return t===e||(null==t||null==e||!L(t)&&!P(e)?t!==t&&e!==e:g(t,e,y,n,r,i))}function g(t,e,n,r,i,o){var a=Ht(t),c=Ht(e),u=z,l=z;a||(u=(u=zt(t))==W?Z:u),c||(l=(l=zt(e))==W?Z:l);var f=u==Z&&!s(t),d=l==Z&&!s(e),h=u==l;if(h&&!f)return o||(o=new p),a||Bt(t)?_(t,e,n,r,i,o):w(t,e,u,n,r,i,o);if(!(i&G)){var v=f&&xt.call(t,"__wrapped__"),y=d&&xt.call(e,"__wrapped__");if(v||y){var g=v?t.value():t,m=y?e.value():e;return o||(o=new p),n(g,m,r,i,o)}}return!!h&&(o||(o=new p),O(t,e,n,r,i,o))}function m(t){return!(!L(t)||S(t))&&(M(t)||s(t)?It:at).test(k(t))}function b(t){if(!T(t))return Rt(t);var e=[];for(var n in Object(t))xt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function _(t,e,n,i,o,s){var a=o&G,c=t.length,u=e.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var f=-1,p=!0,h=o&$?new d:void 0;for(s.set(t,e),s.set(e,t);++f<c;){var v=t[f],y=e[f];if(i)var g=a?i(y,v,f,e,t,s):i(v,y,f,t,e,s);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!r(e,function(t,e){if(!h.has(e)&&(v===t||n(v,t,i,o,s)))return h.add(e)})){p=!1;break}}else if(v!==y&&!n(v,y,i,o,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function w(t,e,n,r,i,o,s){switch(n){case ot:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case it:return!(t.byteLength!=e.byteLength||!r(new Tt(t),new Tt(e)));case H:case B:case X:return N(+t,+e);case V:return t.name==e.name&&t.message==e.message;case tt:case nt:return t==e+"";case J:var u=a;case et:var l=o&G;if(u||(u=c),t.size!=e.size&&!l)return!1;var f=s.get(t);if(f)return f==e;o|=$,s.set(t,e);var d=_(u(t),u(e),r,i,o,s);return s.delete(t),d;case rt:if(Wt)return Wt.call(t)==Wt.call(e)}return!1}function O(t,e,n,r,i,o){var s=i&G,a=F(t),c=a.length;if(c!=F(e).length&&!s)return!1;for(var u=c;u--;){var l=a[u];if(!(s?l in e:xt.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var d=!0;o.set(t,e),o.set(e,t);for(var p=s;++u<c;){var h=t[l=a[u]],v=e[l];if(r)var y=s?r(v,h,l,e,t,o):r(h,v,l,t,e,o);if(!(void 0===y?h===v||n(h,v,r,i,o):y)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var g=t.constructor,m=e.constructor;g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(d=!1)}return o.delete(t),o.delete(e),d}function E(t,e){var n=t.__data__;return I(e)?n["string"==typeof e?"string":"hash"]:n.map}function x(t,e){var n=o(t,e);return m(n)?n:void 0}function j(t,e){return!!(e=null==e?Q:e)&&("number"==typeof t||ct.test(t))&&t>-1&&t%1==0&&t<e}function I(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function S(t){return!!Ot&&Ot in t}function T(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_t)}function k(t){if(null!=t){try{return Et.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function N(t,e){return t===e||t!==t&&e!==e}function R(t){return A(t)&&xt.call(t,"callee")&&(!kt.call(t,"callee")||jt.call(t)==W)}function C(t){return null!=t&&D(t.length)&&!M(t)}function A(t){return P(t)&&C(t)}function M(t){var e=L(t)?jt.call(t):"";return e==Y||e==K}function D(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Q}function L(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function P(t){return!!t&&"object"==typeof t}function F(t){return C(t)?h(t):b(t)}var q=200,U="__lodash_hash_undefined__",$=1,G=2,Q=9007199254740991,W="[object Arguments]",z="[object Array]",H="[object Boolean]",B="[object Date]",V="[object Error]",Y="[object Function]",K="[object GeneratorFunction]",J="[object Map]",X="[object Number]",Z="[object Object]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object Symbol]",it="[object ArrayBuffer]",ot="[object DataView]",st=/[\\^$.*+?()[\]{}|]/g,at=/^\[object .+?Constructor\]$/,ct=/^(?:0|[1-9]\d*)$/,ut={};ut["[object Float32Array]"]=ut["[object Float64Array]"]=ut["[object Int8Array]"]=ut["[object Int16Array]"]=ut["[object Int32Array]"]=ut["[object Uint8Array]"]=ut["[object Uint8ClampedArray]"]=ut["[object Uint16Array]"]=ut["[object Uint32Array]"]=!0,ut[W]=ut[z]=ut[it]=ut[H]=ut[ot]=ut[B]=ut[V]=ut[Y]=ut[J]=ut[X]=ut[Z]=ut[tt]=ut[et]=ut[nt]=ut["[object WeakMap]"]=!1;var lt="object"==typeof t&&t&&t.Object===Object&&t,ft="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||ft||Function("return this")(),pt="object"==typeof n&&n&&!n.nodeType&&n,ht=pt&&"object"==typeof e&&e&&!e.nodeType&&e,vt=ht&&ht.exports===pt&&lt.process,yt=function(){try{return vt&&vt.binding("util")}catch(t){}}(),gt=yt&&yt.isTypedArray,mt=Array.prototype,bt=Function.prototype,_t=Object.prototype,wt=dt["__core-js_shared__"],Ot=function(){var t=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Et=bt.toString,xt=_t.hasOwnProperty,jt=_t.toString,It=RegExp("^"+Et.call(xt).replace(st,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=dt.Symbol,Tt=dt.Uint8Array,kt=_t.propertyIsEnumerable,Nt=mt.splice,Rt=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Ct=x(dt,"DataView"),At=x(dt,"Map"),Mt=x(dt,"Promise"),Dt=x(dt,"Set"),Lt=x(dt,"WeakMap"),Pt=x(Object,"create"),Ft=k(Ct),qt=k(At),Ut=k(Mt),$t=k(Dt),Gt=k(Lt),Qt=St?St.prototype:void 0,Wt=Qt?Qt.valueOf:void 0;u.prototype.clear=function(){this.__data__=Pt?Pt(null):{}},u.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},u.prototype.get=function(t){var e=this.__data__;if(Pt){var n=e[t];return n===U?void 0:n}return xt.call(e,t)?e[t]:void 0},u.prototype.has=function(t){var e=this.__data__;return Pt?void 0!==e[t]:xt.call(e,t)},u.prototype.set=function(t,e){return this.__data__[t]=Pt&&void 0===e?U:e,this},l.prototype.clear=function(){this.__data__=[]},l.prototype.delete=function(t){var e=this.__data__,n=v(e,t);return!(n<0||(n==e.length-1?e.pop():Nt.call(e,n,1),0))},l.prototype.get=function(t){var e=this.__data__,n=v(e,t);return n<0?void 0:e[n][1]},l.prototype.has=function(t){return v(this.__data__,t)>-1},l.prototype.set=function(t,e){var n=this.__data__,r=v(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},f.prototype.clear=function(){this.__data__={hash:new u,map:new(At||l),string:new u}},f.prototype.delete=function(t){return E(this,t).delete(t)},f.prototype.get=function(t){return E(this,t).get(t)},f.prototype.has=function(t){return E(this,t).has(t)},f.prototype.set=function(t,e){return E(this,t).set(t,e),this},d.prototype.add=d.prototype.push=function(t){return this.__data__.set(t,U),this},d.prototype.has=function(t){return this.__data__.has(t)},p.prototype.clear=function(){this.__data__=new l},p.prototype.delete=function(t){return this.__data__.delete(t)},p.prototype.get=function(t){return this.__data__.get(t)},p.prototype.has=function(t){return this.__data__.has(t)},p.prototype.set=function(t,e){var n=this.__data__;if(n instanceof l){var r=n.__data__;if(!At||r.length<q-1)return r.push([t,e]),this;n=this.__data__=new f(r)}return n.set(t,e),this};var zt=function(t){return jt.call(t)};(Ct&&zt(new Ct(new ArrayBuffer(1)))!=ot||At&&zt(new At)!=J||Mt&&"[object Promise]"!=zt(Mt.resolve())||Dt&&zt(new Dt)!=et||Lt&&"[object WeakMap]"!=zt(new Lt))&&(zt=function(t){var e=jt.call(t),n=e==Z?t.constructor:void 0,r=n?k(n):void 0;if(r)switch(r){case Ft:return ot;case qt:return J;case Ut:return"[object Promise]";case $t:return et;case Gt:return"[object WeakMap]"}return e});var Ht=Array.isArray,Bt=gt?function(t){return function(e){return t(e)}}(gt):function(t){return P(t)&&D(t.length)&&!!ut[jt.call(t)]};e.exports=function(t,e){return y(t,e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){(function(n){function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function o(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function s(t,e){return i(e,function(e){return t[e]})}function a(t){return"\\"+Y[t]}function c(t,e){var n=ct(t)||w(t)?o(t.length,String):[],r=n.length,i=!!r;for(var s in t)!e&&!tt.call(t,s)||i&&("length"==s||y(s,r))||n.push(s);return n}function u(t,e,n,r){return void 0===t||_(t,Z[n])&&!tt.call(r,n)?e:t}function l(t,e,n){var r=t[e];tt.call(t,e)&&_(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function f(t){if(!m(t))return it(t);var e=[];for(var n in Object(t))tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function d(t){if(!S(t))return b(t);var e=m(t),n=[];for(var r in t)("constructor"!=r||!e&&tt.call(t,r))&&n.push(r);return n}function p(t,e){return e=ot(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=ot(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=s,r(t,this,a)}}function h(t){if("string"==typeof t)return t;if(k(t))return at?at.call(t):"";var e=t+"";return"0"==e&&1/t==-D?"-0":e}function v(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var s=e[i],a=r?r(n[s],t[s],s,n,t):void 0;l(n,s,void 0===a?t[s]:a)}return n}function y(t,e){return!!(e=null==e?L:e)&&("number"==typeof t||H.test(t))&&t>-1&&t%1==0&&t<e}function g(t,e,n){if(!S(n))return!1;var r=typeof e;return!!("number"==r?O(n)&&y(e,n.length):"string"==r&&e in n)&&_(n[e],t)}function m(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Z)}function b(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function _(t,e){return t===e||t!==t&&e!==e}function w(t){return E(t)&&tt.call(t,"callee")&&(!rt.call(t,"callee")||et.call(t)==P)}function O(t){return null!=t&&I(t.length)&&!j(t)}function E(t){return T(t)&&O(t)}function x(t){return!!T(t)&&(et.call(t)==F||"string"==typeof t.message&&"string"==typeof t.name)}function j(t){var e=S(t)?et.call(t):"";return e==q||e==U}function I(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=L}function S(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function T(t){return!!t&&"object"==typeof t}function k(t){return"symbol"==typeof t||T(t)&&et.call(t)==$}function N(t){return null==t?"":h(t)}function R(t){return O(t)?c(t):f(t)}function C(t){return O(t)?c(t,!0):d(t)}var A=t("lodash._reinterpolate"),M=t("lodash.templatesettings"),D=1/0,L=9007199254740991,P="[object Arguments]",F="[object Error]",q="[object Function]",U="[object GeneratorFunction]",$="[object Symbol]",G=/\b__p \+= '';/g,Q=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,H=/^(?:0|[1-9]\d*)$/,B=/($^)/,V=/['\n\r\u2028\u2029\\]/g,Y={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},K="object"==typeof n&&n&&n.Object===Object&&n,J="object"==typeof self&&self&&self.Object===Object&&self,X=K||J||Function("return this")(),Z=Object.prototype,tt=Z.hasOwnProperty,et=Z.toString,nt=X.Symbol,rt=Z.propertyIsEnumerable,it=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),ot=Math.max,st=nt?nt.prototype:void 0,at=st?st.toString:void 0,ct=Array.isArray,ut=function(t){return p(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&g(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}(function(t,e,n,r){v(e,C(e),t,r)}),lt=p(function(t,e){try{return r(t,void 0,e)}catch(t){return x(t)?t:new Error(t)}});e.exports=function(t,e,n){var r=M.imports._.templateSettings||M;n&&g(t,e,n)&&(e=void 0),t=N(t),e=ut({},e,r,u);var i,o,c=ut({},e.imports,r.imports,u),l=R(c),f=s(c,l),d=0,p=e.interpolate||B,h="__p += '",v=RegExp((e.escape||B).source+"|"+p.source+"|"+(p===A?z:B).source+"|"+(e.evaluate||B).source+"|$","g"),y="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(v,function(e,n,r,s,c,u){return r||(r=s),h+=t.slice(d,u).replace(V,a),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),c&&(o=!0,h+="';\n"+c+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=u+e.length,e}),h+="';\n";var m=e.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(G,""):h).replace(Q,"$1").replace(W,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var b=lt(function(){return Function(l,y+"return "+h).apply(void 0,f)});if(b.source=h,x(b))throw b;return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._reinterpolate":8,"lodash.templatesettings":9}],8:[function(t,e,n){var r=/<%=([\s\S]+?)%>/g;e.exports=r},{}],9:[function(t,e,n){(function(n){function r(t){if("string"==typeof t)return t;if(o(t))return O?O.call(t):"";var e=t+"";return"0"==e&&1/t==-c?"-0":e}function i(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||i(t)&&b.call(t)==u}function s(t){return null==t?"":r(t)}var a=t("lodash._reinterpolate"),c=1/0,u="[object Symbol]",l=/[&<>"'`]/g,f=RegExp(l.source),d=/<%-([\s\S]+?)%>/g,p=/<%([\s\S]+?)%>/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},v="object"==typeof n&&n&&n.Object===Object&&n,y="object"==typeof self&&self&&self.Object===Object&&self,g=v||y||Function("return this")(),m=function(t){return function(e){return null==t?void 0:t[e]}}(h),b=Object.prototype.toString,_=g.Symbol,w=_?_.prototype:void 0,O=w?w.toString:void 0,E={escape:d,evaluate:p,interpolate:a,variable:"",imports:{_:{escape:function(t){return t=s(t),t&&f.test(t)?t.replace(l,m):t}}}};e.exports=E}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._reinterpolate":8}],10:[function(t,e,n){"use strict";function r(t,e){t=Math.round(t*e),(t<<=1)<0&&(t=~t);for(var n="";t>=32;)n+=String.fromCharCode(63+(32|31&t)),t>>=5;return n+=String.fromCharCode(t+63)}function i(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice().reverse());return e}var o={};o.decode=function(t,e){for(var n,r=0,i=0,o=0,s=[],a=0,c=0,u=null,l=Math.pow(10,e||5);r<t.length;){u=null,a=0,c=0;do{c|=(31&(u=t.charCodeAt(r++)-63))<<a,a+=5}while(u>=32);n=1&c?~(c>>1):c>>1,a=c=0;do{c|=(31&(u=t.charCodeAt(r++)-63))<<a,a+=5}while(u>=32);i+=n,o+=1&c?~(c>>1):c>>1,s.push([i/l,o/l])}return s},o.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,e||5),i=r(t[0][0],n)+r(t[0][1],n),o=1;o<t.length;o++){var s=t[o],a=t[o-1];i+=r(s[0]-a[0],n),i+=r(s[1]-a[1],n)}return i},o.fromGeoJSON=function(t,e){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return o.encode(i(t.coordinates),e)},o.toGeoJSON=function(t,e){return{type:"LineString",coordinates:i(o.decode(t,e))}},"object"==typeof e&&e.exports&&(e.exports=o)},{}],11:[function(t,e,n){"use strict";function r(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}n.__esModule=!0;var i=r();i.withExtraArgument=r,n.default=i},{}],12:[function(t,e,n){"use strict";n.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,o,s){var a=t(n,o,s),c=a.dispatch,u=[],l={getState:a.getState,dispatch:function(t){return c(t)}};return u=e.map(function(t){return t(l)}),c=i.default.apply(void 0,u)(a.dispatch),r({},a,{dispatch:c})}}};var i=function(t){return t&&t.__esModule?t:{default:t}}(t("./compose"))},{"./compose":15}],13:[function(t,e,n){"use strict";function r(t,e){return function(){return e(t.apply(void 0,arguments))}}n.__esModule=!0,n.default=function(t,e){if("function"==typeof t)return r(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),i={},o=0;o<n.length;o++){var s=n[o],a=t[s];"function"==typeof a&&(i[s]=r(a,e))}return i}},{}],14:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(t,e,n){var r=Object.keys(e),i=n&&n.type===a.ActionTypes.INIT?"initialState argument passed to createStore":"previous state received by the reducer";if(0===r.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!(0,c.default)(t))return"The "+i+' has unexpected type of "'+{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+r.join('", "')+'"';var o=Object.keys(t).filter(function(t){return!e.hasOwnProperty(t)});return o.length>0?"Unexpected "+(o.length>1?"keys":"key")+' "'+o.join('", "')+'" found in '+i+'. Expected to find one of the known reducer keys instead: "'+r.join('", "')+'". Unexpected keys will be ignored.':void 0}function s(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:a.ActionTypes.INIT}))throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+a.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}n.__esModule=!0,n.default=function(t){for(var n=Object.keys(t),r={},a=0;a<n.length;a++){var c=n[a];"function"==typeof t[c]&&(r[c]=t[c])}var l,f=Object.keys(r);try{s(r)}catch(t){l=t}return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];if(l)throw l;if("production"!==e.env.NODE_ENV){var s=o(t,r,n);s&&(0,u.default)(s)}for(var a=!1,c={},d=0;d<f.length;d++){var p=f[d],h=r[p],v=t[p],y=h(v,n);if(void 0===y){var g=i(p,n);throw new Error(g)}c[p]=y,a=a||y!==v}return a?c:t}};var a=t("./createStore"),c=r(t("lodash/isPlainObject")),u=r(t("./utils/warning"))}).call(this,t("_process"))},{"./createStore":16,"./utils/warning":18,_process:2,"lodash/isPlainObject":23}],15:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};var r=function(){var t=e[e.length-1],n=e.slice(0,-1);return{v:function(){return n.reduceRight(function(t,e){return e(t)},t.apply(void 0,arguments))}}}();return"object"==typeof r?r.v:void 0}},{}],16:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){function r(){v===h&&(v=h.slice())}function c(){return p}function u(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return r(),v.push(t),function(){if(e){e=!1,r();var n=v.indexOf(t);v.splice(n,1)}}}function l(t){if(!(0,o.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,p=d(p,t)}finally{y=!1}for(var e=h=v,n=0;n<e.length;n++)e[n]();return t}var f;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var d=t,p=e,h=[],v=h,y=!1;return l({type:a.INIT}),f={dispatch:l,subscribe:u,getState:c,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");d=t,l({type:a.INIT})}},f[s.default]=function(){var t,e=u;return t={subscribe:function(t){function n(){t.next&&t.next(c())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:e(n)}}},t[s.default]=function(){return this},t},f}n.__esModule=!0,n.ActionTypes=void 0,n.default=i;var o=r(t("lodash/isPlainObject")),s=r(t("symbol-observable")),a=n.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":23,"symbol-observable":24}],17:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.compose=n.applyMiddleware=n.bindActionCreators=n.combineReducers=n.createStore=void 0;var i=r(t("./createStore")),o=r(t("./combineReducers")),s=r(t("./bindActionCreators")),a=r(t("./applyMiddleware")),c=r(t("./compose"));r(t("./utils/warning"));n.createStore=i.default,n.combineReducers=o.default,n.bindActionCreators=s.default,n.applyMiddleware=a.default,n.compose=c.default}).call(this,t("_process"))},{"./applyMiddleware":12,"./bindActionCreators":13,"./combineReducers":14,"./compose":15,"./createStore":16,"./utils/warning":18,_process:2}],18:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}},{}],19:[function(t,e,n){var r=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=r},{"./_overArg":21}],20:[function(t,e,n){e.exports=function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}},{}],21:[function(t,e,n){e.exports=function(t,e){return function(n){return t(e(n))}}},{}],22:[function(t,e,n){e.exports=function(t){return!!t&&"object"==typeof t}},{}],23:[function(t,e,n){var r=t("./_getPrototype"),i=t("./_isHostObject"),o=t("./isObjectLike"),s="[object Object]",a=Function.prototype,c=Object.prototype,u=a.toString,l=c.hasOwnProperty,f=u.call(Object),d=c.toString;e.exports=function(t){if(!o(t)||d.call(t)!=s||i(t))return!1;var e=r(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}},{"./_getPrototype":19,"./_isHostObject":20,"./isObjectLike":22}],24:[function(t,e,n){(function(n){"use strict";e.exports=t("./ponyfill")(n||window||this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill":25}],25:[function(t,e,n){"use strict";e.exports=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}},{}],26:[function(t,e,n){"use strict";var r=t("./src/suggestions");window.Suggestions=e.exports=r},{"./src/suggestions":29}],27:[function(t,e,n){!function(){var t=this,r={};void 0!==n?e.exports=r:t.fuzzy=r,r.simpleFilter=function(t,e){return e.filter(function(e){return r.test(t,e)})},r.test=function(t,e){return null!==r.match(t,e)},r.match=function(t,e,n){n=n||{};var r,i=0,o=[],s=e.length,a=0,c=0,u=n.pre||"",l=n.post||"",f=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var d=0;d<s;d++)r=e[d],f[d]===t[i]?(r=u+r+l,i+=1,c+=1+c):c=0,a+=c,o[o.length]=r;return i===t.length?{rendered:o.join(""),score:a}:null},r.filter=function(t,e,n){return n=n||{},e.reduce(function(e,i,o,s){var a=i;n.extract&&(a=n.extract(i));var c=r.match(t,a,n);return null!=c&&(e[e.length]={string:c.rendered,score:c.score,index:o,original:i}),e},[]).sort(function(t,e){var n=e.score-t.score;return n||t.index-e.index})}}()},{}],28:[function(t,e,n){"Use strict";var r=function(t){return this.component=t,this.items=[],this.active=0,this.element=document.createElement("ul"),this.element.className="suggestions",t.el.parentNode.insertBefore(this.element,t.el.nextSibling),this};r.prototype.show=function(){this.element.style.display="block"},r.prototype.hide=function(){this.element.style.display="none"},r.prototype.add=function(t){this.items.push(t)},r.prototype.clear=function(){this.items=[],this.active=0},r.prototype.isEmpty=function(){return!this.items.length},r.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},r.prototype.drawItem=function(t,e){var n=document.createElement("li"),r=document.createElement("a");e&&(n.className+=" active"),r.innerHTML=t.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.handleMouseDown.call(this,t)}.bind(this))},r.prototype.handleMouseDown=function(t){this.component.value(t.original),this.clear(),this.draw()},r.prototype.move=function(t){this.active=t,this.draw()},r.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},r.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},e.exports=r},{}],29:[function(t,e,n){"use strict";var r=t("xtend"),i=t("fuzzy"),o=t("./list"),s=function(t,e,n){return n=n||{},this.options=r({minLength:2,limit:5,filter:!0},n),this.el=t,this.data=e||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this};s.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&(this.query=this.normalize(this.el.value),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this)))},s.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},s.prototype.handleBlur=function(){this.list.hide()},s.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show()},s.prototype.update=function(t){this.data=t,this.list.draw()},s.prototype.clear=function(){this.data=[],this.list.clear()},s.prototype.normalize=function(t){return t=t.toLowerCase()},s.prototype.match=function(t,e){return t.indexOf(e)>-1},s.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},s.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};t(this.options.filter?i.filter(this.query,this.data,e):this.data.map(function(t){return{original:t,string:this.getItemValue(t).replace(new RegExp("("+this.query+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})}}.bind(this)))},s.prototype.getItemValue=function(t){return t},e.exports=s},{"./list":28,fuzzy:27,xtend:32}],30:[function(t,e,n){var r=t("turf-meta").coordEach;e.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return r(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},{"turf-meta":31}],31:[function(t,e,n){function r(t,e,n){var r,i,o,s,a,c,u,f,d,p=0,h="FeatureCollection"===t.type,v="Feature"===t.type,y=h?t.features.length:1;for(r=0;r<y;r++)for(c=(d="GeometryCollection"===(f=h?t.features[r].geometry:v?t.geometry:t).type)?f.geometries.length:1,s=0;s<c;s++)if(a=d?f.geometries[s]:f,u=a.coordinates,p=!n||"Polygon"!==a.type&&"MultiPolygon"!==a.type?0:1,"Point"===a.type)e(u);else if("LineString"===a.type||"MultiPoint"===a.type)for(i=0;i<u.length;i++)e(u[i]);else if("Polygon"===a.type||"MultiLineString"===a.type)for(i=0;i<u.length;i++)for(o=0;o<u[i].length-p;o++)e(u[i][o]);else{if("MultiPolygon"!==a.type)throw new Error("Unknown Geometry Type");for(i=0;i<u.length;i++)for(o=0;o<u[i].length;o++)for(l=0;l<u[i][o].length-p;l++)e(u[i][o][l])}}function i(t,e){var n;switch(t.type){case"FeatureCollection":for(features=t.features,n=0;n<t.features.length;n++)e(t.features[n].properties);break;case"Feature":e(t.properties)}}e.exports.coordEach=r,e.exports.coordReduce=function(t,e,n,i){return r(t,function(t){n=e(n,t)},i),n},e.exports.propEach=i,e.exports.propReduce=function(t,e,n){return i(t,function(t){n=e(n,t)}),n}},{}],32:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},{}],33:[function(t,e,n){"use strict";function r(t){return function(e){var n=b.default.createPoint(t,{id:"origin","marker-symbol":"A"});e({type:m.ORIGIN,origin:n}),e(g("origin",{feature:n}))}}function i(t){return function(e){var n=b.default.createPoint(t,{id:"destination","marker-symbol":"B"});e({type:m.DESTINATION,destination:n}),e(g("destination",{feature:n}))}}function o(t){return function(e){e({type:m.DIRECTIONS,directions:t}),e(g("route",{route:t}))}}function s(t){return{type:m.WAYPOINTS,waypoints:t}}function a(t){return{type:m.HOVER_MARKER,hoverMarker:t}}function c(){return function(t,e){var n=e(),s=n.api,a=n.accessToken,c=n.routeIndex,l=n.profile,d=u(e),p=[];p.push("geometries=polyline"),p.push("alternatives=true"),p.push("steps=true"),p.push("overview=full"),p.push("access_token="+a),_.abort(),_.open("GET",s+"mapbox/"+l+"/"+d+".json?"+p.join("&"),!0),_.onload=function(){if(!(_.status>=200&&_.status<400))return t(o([])),t(f(JSON.parse(_.responseText).message));var e=JSON.parse(_.responseText);if(e.error)return t(o([])),t(f(e.error));t(f(null)),e.routes[c]||t(h(0)),t(o(e.routes)),t(r(e.waypoints[0].location)),t(i(e.waypoints[e.waypoints.length-1].location))},_.onerror=function(){return t(o([])),t(f(JSON.parse(_.responseText).message))},_.send()}}function u(t){var e=t(),n=e.origin,r=e.destination,i=e.waypoints,o=[];return o.push(n.geometry.coordinates.join(",")),o.push(";"),i.length&&i.forEach(function(t){o.push(t.geometry.coordinates.join(",")),o.push(";")}),o.push(r.geometry.coordinates.join(",")),encodeURIComponent(o.join(""))}function l(t){var e={id:"waypoint"};return Object.assign(t,{properties:t.properties?Object.assign(t.properties,e):e})}function f(t){return function(e){e({type:"ERROR",error:t}),t&&e(g("error",{error:t}))}}function d(t){return{type:m.ORIGIN_FROM_COORDINATES,coordinates:t}}function p(t){return{type:m.DESTINATION_FROM_COORDINATES,coordinates:t}}function h(t){return{type:m.ROUTE_INDEX,routeIndex:t}}function v(t){return function(e,n){var i=n().destination;e(r(t)),i.geometry&&e(c())}}function y(t){return function(e,n){var r=n().origin;e(i(t)),r.geometry&&e(c())}}function g(t,e){var n=this;return function(r,i){var o=i().events;if(!o[t])return{type:m.EVENTS,events:o};for(var s=o[t].slice(),a=0;a<s.length;a++)s[a].call(n,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.queryOrigin=function(t){return{type:m.ORIGIN_QUERY,query:t}},n.queryDestination=function(t){return{type:m.DESTINATION_QUERY,query:t}},n.queryOriginCoordinates=d,n.queryDestinationCoordinates=p,n.clearOrigin=function(){return function(t){t({type:m.ORIGIN_CLEAR}),t(g("clear",{type:"origin"})),t(f(null))}},n.clearDestination=function(){return function(t){t({type:m.DESTINATION_CLEAR}),t(g("clear",{type:"destination"})),t(f(null))}},n.setOptions=function(t){return{type:m.SET_OPTIONS,options:t}},n.hoverMarker=function(t){return function(e){e(a(t?b.default.createPoint(t,{id:"hover"}):{}))}},n.setRouteIndex=h,n.createOrigin=v,n.createDestination=y,n.setProfile=function(t){return function(e,n){var r=n(),i=r.origin,o=r.destination;e({type:m.DIRECTIONS_PROFILE,profile:t}),e(g("profile",{profile:t})),i.geometry&&o.geometry&&e(c())}},n.reverse=function(){return function(t,e){var n=e();n.destination.geometry&&t(r(n.destination.geometry.coordinates)),n.origin.geometry&&t(i(n.origin.geometry.coordinates)),n.origin.geometry&&n.destination.geometry&&t(c())}},n.setOriginFromCoordinates=function(t){return function(e){if(b.default.validCoords(t)||(t=[b.default.wrap(t[0]),b.default.wrap(t[1])]),isNaN(t[0])&&isNaN(t[1]))return e(f(new Error("Coordinates are not valid")));e(d(t)),e(v(t))}},n.setDestinationFromCoordinates=function(t){return function(e){if(b.default.validCoords(t)||(t=[b.default.wrap(t[0]),b.default.wrap(t[1])]),isNaN(t[0])&&isNaN(t[1]))return e(f(new Error("Coordinates are not valid")));e(y(t)),e(p(t))}},n.addWaypoint=function(t,e){return function(n,r){var i=r(),o=i.destination,a=i.waypoints;a.splice(t,0,l(e)),n(s(a)),o.geometry&&n(c())}},n.setWaypoint=function(t,e){return function(n,r){var i=r(),o=i.destination,a=i.waypoints;a[t]=l(e),n(s(a)),o.geometry&&n(c())}},n.removeWaypoint=function(t){return function(e,n){var r=n(),i=r.destination,o=r.waypoints;e(s(o=o.filter(function(e){return!b.default.coordinateMatch(e,t)}))),i.geometry&&e(c())}},n.eventSubscribe=function(t,e){return function(n,r){var i=r().events;return i[t]=i[t]||[],i[t].push(e),{type:m.EVENTS,events:i}}},n.eventEmit=g;var m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("../constants/action_types")),b=function(t){return t&&t.__esModule?t:{default:t}}(t("../utils")),_=new XMLHttpRequest},{"../constants/action_types":34,"../utils":42}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.DESTINATION="DESTINATION",n.DESTINATION_CLEAR="DESTINATION_CLEAR",n.DESTINATION_QUERY="DESTINATION_QUERY",n.DESTINATION_FROM_COORDINATES="DESTINATION_FROM_COORDINATES",n.DIRECTIONS="DIRECTIONS",n.DIRECTIONS_PROFILE="DIRECTIONS_PROFILE",n.EVENTS="EVENTS",n.ERROR="ERROR",n.HOVER_MARKER="HOVER_MARKER",n.ORIGIN="ORIGIN",n.ORIGIN_CLEAR="ORIGIN_CLEAR",n.ORIGIN_QUERY="ORIGIN_QUERY",n.ORIGIN_FROM_COORDINATES="ORIGIN_FROM_COORDINATES",n.ROUTE_INDEX="ROUTE_INDEX",n.SET_OPTIONS="SET_OPTIONS",n.WAYPOINTS="WAYPOINTS"},{}],35:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){this._ev=new u.EventEmitter,this.options=(0,c.default)({},this.options,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=r(t("suggestions")),a=r(t("lodash.debounce")),c=r(t("xtend")),u=t("events"),l=r(t("../utils"));i.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0},onAdd:function(t){this._map=t,this.request=new XMLHttpRequest;var e=document.createElement("div");e.className="mapboxgl-ctrl-geocoder";var n=document.createElement("span");n.className="geocoder-icon geocoder-icon-search";var r=this._inputEl=document.createElement("input");r.type="text",r.placeholder=this.options.placeholder,r.addEventListener("keydown",(0,a.default)(function(t){if(!t.target.value)return this._clearEl.classList.remove("active");t.metaKey||-1!==[9,27,37,39,13,38,40].indexOf(t.keyCode)||this._queryFromInput(t.target.value)}.bind(this)),200),r.addEventListener("change",function(e){e.target.value&&this._clearEl.classList.add("active");var n=this._typeahead.selected;if(n){if(this.options.flyTo)if(n.bbox&&n.context&&n.context.length<=3||n.bbox&&!n.context){var r=n.bbox;t.fitBounds([[r[0],r[1]],[r[2],r[3]]])}else t.flyTo({center:n.center,zoom:this.options.zoom});this._input=n,this.fire("result",{result:n})}}.bind(this));var i=document.createElement("div");i.classList.add("geocoder-pin-right");var o=this._clearEl=document.createElement("button");o.className="geocoder-icon geocoder-icon-close",o.addEventListener("click",this._clear.bind(this));var c=this._loadingEl=document.createElement("span");return c.className="geocoder-icon geocoder-icon-loading",i.appendChild(o),i.appendChild(c),e.appendChild(n),e.appendChild(r),e.appendChild(i),this.options.container&&(this.options.position=!1),this._typeahead=new s.default(r,[],{filter:!1}),this._typeahead.getItemValue=function(t){return t.place_name},e},_geocode:function(t,e){this._loadingEl.classList.add("active"),this.fire("loading");var n=[];this.options.proximity&&n.push("proximity="+this.options.proximity.join()),this.options.bbox&&n.push("bbox="+this.options.bbox.join()),this.options.country&&n.push("country="+this.options.country),this.options.types&&n.push("types="+this.options.types);var r=this.options.accessToken?this.options.accessToken:mapboxgl.accessToken;n.push("access_token="+r),this.request.abort(),this.request.open("GET","https://api.mapbox.com/geocoding/v5/mapbox.places/"+encodeURIComponent(t.trim())+".json?"+n.join("&"),!0),this.request.onload=function(){if(this._loadingEl.classList.remove("active"),this.request.status>=200&&this.request.status<400){var t=JSON.parse(this.request.responseText);return t.features.length?this._clearEl.classList.add("active"):(this._clearEl.classList.remove("active"),this._typeahead.selected=null),this.fire("results",{results:t.features}),this._typeahead.update(t.features),e(t.features)}this.fire("error",{error:JSON.parse(this.request.responseText).message})}.bind(this),this.request.onerror=function(){this._loadingEl.classList.remove("active"),this.fire("error",{error:JSON.parse(this.request.responseText).message})}.bind(this),this.request.send()},_queryFromInput:function(t){(t=t.trim())||this._clear(),t.length>2&&this._geocode(t,function(t){this._results=t}.bind(this))},_change:function(){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this._inputEl.dispatchEvent(t)},_query:function(t){t&&("object"===(void 0===t?"undefined":o(t))&&t.length&&(t=[l.default.wrap(t[0]),l.default.wrap(t[1])].join()),this._geocode(t,function(t){if(t.length){var e=t[0];this._results=t,this._typeahead.selected=e,this._inputEl.value=e.place_name,this._change()}}.bind(this)))},_setInput:function(t){t&&("object"===(void 0===t?"undefined":o(t))&&t.length&&(t=[l.default.wrap(t[0]),l.default.wrap(t[1])].join()),this._inputEl.value=t,this._input=null,this._typeahead.selected=null,this._typeahead.clear(),this._change())},_clear:function(){this._input=null,this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._change(),this._inputEl.focus(),this._clearEl.classList.remove("active"),this.fire("clear")},getResult:function(){return this._input},query:function(t){return this._query(t),this},setInput:function(t){return this._setInput(t),this},on:function(t,e){return this._ev.on(t,e),this},fire:function(t,e){return this._ev.emit(t,e),this},off:function(t,e){return this._ev.removeListener(t,e),this}},e.exports=i},{"../utils":42,events:1,"lodash.debounce":5,suggestions:26,xtend:32}],36:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=r(t("./geocoder")),a=r(t("lodash.template")),c=r(t("lodash.isequal")),u=r(t("turf-extent")),l=(0,a.default)("<div class='mapbox-directions-component mapbox-directions-inputs'>\n  <div class='mapbox-directions-component-keyline'>\n    <div class='mapbox-directions-origin'>\n      <label class='mapbox-form-label'>\n        <span class='directions-icon directions-icon-depart'></span>\n      </label>\n      <div id='mapbox-directions-origin-input'></div>\n    </div>\n\n    <button\n      class='directions-icon directions-icon-reverse directions-reverse js-reverse-inputs'\n      title='Reverse origin &amp; destination'>\n    </button>\n\n    <div class='mapbox-directions-destination'>\n      <label class='mapbox-form-label'>\n        <span class='directions-icon directions-icon-arrive'></span>\n      </label>\n      <div id='mapbox-directions-destination-input'></div>\n    </div>\n  </div>\n\n  <div class='mapbox-directions-profile mapbox-directions-component-keyline mapbox-directions-clearfix'><input\n      id='mapbox-directions-profile-driving-traffic'\n      type='radio'\n      name='profile'\n      <% if (profile === 'driving-traffic') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-driving-traffic'>Traffic</label>\n    <input\n      id='mapbox-directions-profile-driving'\n      type='radio'\n      name='profile'\n      <% if (profile === 'driving') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-driving'>Driving</label>\n    <input\n      id='mapbox-directions-profile-walking'\n      type='radio'\n      name='profile'\n      <% if (profile === 'walking') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-walking'>Walking</label>\n    <input\n      id='mapbox-directions-profile-cycling'\n      type='radio'\n      name='profile'\n      <% if (profile === 'cycling') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-cycling'>Cycling</label>\n  </div>\n</div>\n"),f=function(){function t(e,n,r,o){i(this,t);var s=n.getState(),a=s.originQuery,c=s.destinationQuery,u=s.profile;e.innerHTML=l({originQuery:a,destinationQuery:c,profile:u}),this.container=e,this.actions=r,this.store=n,this._map=o,this.onAdd(),this.render()}return o(t,[{key:"animateToCoordinates",value:function(t,e){var n=this.store.getState(),r=n.origin,i=n.destination;if(r.geometry&&i.geometry&&!(0,c.default)(r.geometry,i.geometry)){var o=(0,u.default)({type:"FeatureCollection",features:[r,i]});this._map.fitBounds([[o[0],o[1]],[o[2],o[3]]],{padding:80})}else this._map.flyTo({center:e})}},{key:"onAdd",value:function(){var t=this,e=this.actions,n=e.clearOrigin,r=e.clearDestination,i=e.createOrigin,o=e.createDestination,a=e.setProfile,c=e.reverse,u=this.store.getState(),l=u.geocoder,f=u.accessToken;this.originInput=new s.default(Object.assign({},{flyTo:!1,placeholder:"Choose a starting place",accessToken:f},l));var d=this.originInput.onAdd();this.container.querySelector("#mapbox-directions-origin-input").appendChild(d),this.destinationInput=new s.default(Object.assign({},{flyTo:!1,placeholder:"Choose destination",accessToken:f},l));var p=this.destinationInput.onAdd();this.container.querySelector("#mapbox-directions-destination-input").appendChild(p),this.originInput.on("result",function(e){var n=e.result.center;i(n),t.animateToCoordinates("origin",n)}),this.originInput.on("clear",n),this.destinationInput.on("result",function(e){var n=e.result.center;o(n),t.animateToCoordinates("destination",n)}),this.destinationInput.on("clear",r);var h=this.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(h,function(t){t.addEventListener("change",function(){a(t.id.replace("mapbox-directions-profile-",""))})}),this.container.querySelector(".js-reverse-inputs").addEventListener("click",function(){var e=t.store.getState(),n=e.origin,r=e.destination;n&&t.actions.queryDestination(n.geometry.coordinates),r&&t.actions.queryOrigin(r.geometry.coordinates),c()})}},{key:"render",value:function(){var t=this;this.store.subscribe(function(){var e=t.store.getState(),n=e.originQuery,r=e.destinationQuery,i=e.originQueryCoordinates,o=e.destinationQueryCoordinates;n&&(t.originInput.query(n),t.actions.queryOrigin(null)),r&&(t.destinationInput.query(r),t.actions.queryDestination(null)),i&&(t.originInput.setInput(i),t.animateToCoordinates("origin",i),t.actions.queryOriginCoordinates(null)),o&&(t.destinationInput.setInput(o),t.animateToCoordinates("destination",o),t.actions.queryDestinationCoordinates(null))})}}]),t}();n.default=f},{"./geocoder":35,"lodash.isequal":6,"lodash.template":7,"turf-extent":30}],37:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=r(t("../utils")),a=r(t("lodash.template")),c=r(t("lodash.isequal")),u=(0,a.default)("<div class='directions-control directions-control-directions'>\n  <div class='mapbox-directions-component mapbox-directions-route-summary<% if (routes > 1) { %> mapbox-directions-multiple<% } %>'>\n    <% if (routes > 1) { %>\n    <div class='mapbox-directions-routes mapbox-directions-clearfix'>\n      <% for (var i = 0; i < routes; i++) { %>\n        <input type='radio' name='routes' id='<%= i %>' <% if (i === routeIndex) { %>checked<% } %>>\n        <label for='<%= i %>' class='mapbox-directions-route'><%= i + 1 %></label>\n      <% } %>\n    </div>\n    <% } %>\n    <h1><%- duration %></h1>\n    <span><%- distance %></span>\n  </div>\n\n  <div class='mapbox-directions-instructions'>\n    <div class='mapbox-directions-instructions-wrapper'>\n      <ol class='mapbox-directions-steps'>\n        <% steps.forEach(function(step) { %>\n          <%\n            var distance = step.distance ? format(step.distance) : false;\n            var icon = step.maneuver.modifier ? step.maneuver.modifier.replace(/\\s+/g, '-').toLowerCase() : step.maneuver.type.replace(/\\s+/g, '-').toLowerCase();\n\n            if (step.maneuver.type === 'arrive' || step.maneuver.type === 'depart') {\n              icon = step.maneuver.type;\n            }\n\n            if (step.maneuver.type === 'roundabout' || step.maneuver.type === 'rotary') {\n              icon= 'roundabout';\n            }\n\n            var lng = step.maneuver.location[0];\n            var lat = step.maneuver.location[1];\n          %>\n          <li\n            data-lat='<%= lat %>'\n            data-lng='<%= lng %>'\n            class='mapbox-directions-step'>\n            <span class='directions-icon directions-icon-<%= icon %>'></span>\n            <div class='mapbox-directions-step-maneuver'>\n              <%= step.maneuver.instruction %>\n            </div>\n            <% if (distance) { %>\n              <div class='mapbox-directions-step-distance'>\n                <%= distance %>\n              </div>\n            <% } %>\n          </li>\n        <% }); %>\n      </ol>\n    </div>\n  </div>\n</div>\n"),l=(0,a.default)("<div class='directions-control directions-control-directions'>\n  <div class='mapbox-directions-error'>\n    <%= error %>\n  </div>\n</div>\n"),f=function(){function t(e,n,r,o){i(this,t),this.container=e,this.actions=r,this.store=n,this._map=o,this.directions={},this.render()}return o(t,[{key:"render",value:function(){var t=this;this.store.subscribe(function(){var e=t.actions,n=e.hoverMarker,r=e.setRouteIndex,i=t.store.getState(),o=i.routeIndex,a=i.unit,f=i.directions,d=i.error,p=!(0,c.default)(f[o],t.directions);if(d)t.container.innerHTML=l({error:d});else if(f.length&&p){var h=t.directions=f[o];t.container.innerHTML=u({routeIndex:o,routes:f.length,steps:h.legs[0].steps,format:s.default.format[a],duration:s.default.format[a](h.distance),distance:s.default.format.duration(h.duration)});var v=t.container.querySelectorAll(".mapbox-directions-step");Array.prototype.forEach.call(v,function(e){var r=e.getAttribute("data-lng"),i=e.getAttribute("data-lat");e.addEventListener("mouseover",function(){n([r,i])}),e.addEventListener("mouseout",function(){n(null)}),e.addEventListener("click",function(){t._map.flyTo({center:[r,i],zoom:16})})});var y=t.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(y,function(t){t.addEventListener("change",function(t){r(parseInt(t.target.id,10))})})}else t.container.innerHTML&&p&&(t.container.innerHTML="")})}}]),t}();n.default=f},{"../utils":42,"lodash.isequal":6,"lodash.template":7}],38:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("redux"),a=r(t("redux-thunk")),c=t("polyline"),u=r(t("./utils")),l=r(t("./reducers")),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./actions")),d=r(t("./directions_style")),p=r(t("./controls/inputs")),h=r(t("./controls/instructions")),v=(0,s.applyMiddleware)(a.default)(s.createStore)(l.default),y=function(){function t(e){i(this,t),this.actions=(0,s.bindActionCreators)(f,v.dispatch),this.actions.setOptions(e||{}),this.options=e||{},this.onDragDown=this._onDragDown.bind(this),this.onDragMove=this._onDragMove.bind(this),this.onDragUp=this._onDragUp.bind(this),this.move=this._move.bind(this),this.onClick=this._onClick.bind(this)}return o(t,[{key:"onAdd",value:function(t){var e=this;this._map=t;var n=v.getState().controls,r=this.container=document.createElement("div");r.className="mapboxgl-ctrl-directions mapboxgl-ctrl";var i=document.createElement("div");i.className="directions-control directions-control-inputs",new p.default(i,v,this.actions,this._map);var o=document.createElement("div");return o.className="directions-control directions-control-instructions",new h.default(o,v,{hoverMarker:this.actions.hoverMarker,setRouteIndex:this.actions.setRouteIndex},this._map),n.inputs&&r.appendChild(i),n.instructions&&r.appendChild(o),this.subscribedActions(),this._map.loaded()?this.mapState():this._map.on("load",function(){return e.mapState()}),r}},{key:"onRemove",value:function(t){return this.container.parentNode.removeChild(this.container),this.removeRoutes(),t.off("mousedown",this.onDragDown),t.off("mousemove",this.move),t.off("touchstart",this.onDragDown),t.off("touchstart",this.move),t.off("click",this.onClick),this.storeUnsubscribe&&(this.storeUnsubscribe(),delete this.storeUnsubscribe),this._map=null,this}},{key:"mapState",value:function(){var t=this,e=v.getState(),n=e.profile,r=e.styles,i=e.interactive;this.actions.eventEmit("profile",{profile:n});var o={type:"geojson",data:{type:"FeatureCollection",features:[]}};this._map.addSource("directions",o),d.default.forEach(function(e){return t._map.addLayer(e)}),r&&r.length&&r.forEach(function(e){return t._map.addLayer(e)}),i&&(this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick),this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown))}},{key:"subscribedActions",value:function(){var t=this;this.storeUnsubscribe=v.subscribe(function(){var e=v.getState(),n=e.origin,r=e.destination,i=e.hoverMarker,o=e.directions,s=e.routeIndex,a={type:"FeatureCollection",features:[n,r,i].filter(function(t){return t.geometry})};o.length&&o.forEach(function(t,e){var n={geometry:{type:"LineString",coordinates:(0,c.decode)(t.geometry,5).map(function(t){return t.reverse()})},properties:{"route-index":e,route:e===s?"selected":"alternate"}};a.features.push(n),e===s&&t.legs[0].steps.forEach(function(t){"waypoint"===t.maneuver.type&&a.features.push({type:"Feature",geometry:t.maneuver.location,properties:{id:"waypoint"}})})}),t._map.style&&t._map.getSource("directions")&&t._map.getSource("directions").setData(a)})}},{key:"_onClick",value:function(t){var e=this,n=v.getState().origin,r=[t.lngLat.lng,t.lngLat.lat];if(n.geometry){var i=this._map.queryRenderedFeatures(t.point,{layers:["directions-origin-point","directions-destination-point","directions-waypoint-point","directions-route-line-alt"]});if(i.length){if(i.forEach(function(t){"directions-waypoint-point"===t.layer.id&&e.actions.removeWaypoint(t)}),"alternate"===i[0].properties.route){var o=i[0].properties["route-index"];this.actions.setRouteIndex(o)}}else this.actions.setDestinationFromCoordinates(r),this._map.flyTo({center:r})}else this.actions.setOriginFromCoordinates(r)}},{key:"_move",value:function(t){var e=this,n=v.getState().hoverMarker,r=this._map.queryRenderedFeatures(t.point,{layers:["directions-route-line-alt","directions-route-line","directions-origin-point","directions-destination-point","directions-hover-point"]});this._map.getCanvas().style.cursor=r.length?"pointer":"",r.length?(this.isCursorOverPoint=r[0],this._map.dragPan.disable(),r.forEach(function(r){"directions-route-line"===r.layer.id?e.actions.hoverMarker([t.lngLat.lng,t.lngLat.lat]):n.geometry&&e.actions.hoverMarker(null)})):this.isCursorOverPoint&&(this.isCursorOverPoint=!1,this._map.dragPan.enable())}},{key:"_onDragDown",value:function(){this.isCursorOverPoint&&(this.isDragging=this.isCursorOverPoint,this._map.getCanvas().style.cursor="grab",this._map.on("mousemove",this.onDragMove),this._map.on("mouseup",this.onDragUp),this._map.on("touchmove",this.onDragMove),this._map.on("touchend",this.onDragUp))}},{key:"_onDragMove",value:function(t){if(this.isDragging){var e=[t.lngLat.lng,t.lngLat.lat];switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.createOrigin(e);break;case"directions-destination-point":this.actions.createDestination(e);break;case"directions-hover-point":this.actions.hoverMarker(e)}}}},{key:"_onDragUp",value:function(){if(this.isDragging){var t=v.getState(),e=t.hoverMarker,n=t.origin,r=t.destination;switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.setOriginFromCoordinates(n.geometry.coordinates);break;case"directions-destination-point":this.actions.setDestinationFromCoordinates(r.geometry.coordinates);break;case"directions-hover-point":e.geometry&&!u.default.coordinateMatch(this.isDragging,e)&&this.actions.addWaypoint(0,e)}this.isDragging=!1,this._map.getCanvas().style.cursor="",this._map.off("touchmove",this.onDragMove),this._map.off("touchend",this.onDragUp),this._map.off("mousemove",this.onDragMove),this._map.off("mouseup",this.onDragUp)}}},{key:"interactive",value:function(t){return t?(this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown),this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick)):(this._map.off("touchstart",this.move),this._map.off("touchstart",this.onDragDown),this._map.off("mousedown",this.onDragDown),this._map.off("mousemove",this.move),this._map.off("click",this.onClick)),this}},{key:"getOrigin",value:function(){return v.getState().origin}},{key:"setOrigin",value:function(t){return"string"==typeof t?this.actions.queryOrigin(t):this.actions.setOriginFromCoordinates(t),this}},{key:"getDestination",value:function(){return v.getState().destination}},{key:"setDestination",value:function(t){return"string"==typeof t?this.actions.queryDestination(t):this.actions.setDestinationFromCoordinates(t),this}},{key:"reverse",value:function(){return this.actions.reverse(),this}},{key:"addWaypoint",value:function(t,e){return e.type||(e=u.default.createPoint(e,{id:"waypoint"})),this.actions.addWaypoint(t,e),this}},{key:"setWaypoint",value:function(t,e){return e.type||(e=u.default.createPoint(e,{id:"waypoint"})),this.actions.setWaypoint(t,e),this}},{key:"removeWaypoint",value:function(t){var e=v.getState().waypoints;return this.actions.removeWaypoint(e[t]),this}},{key:"getWaypoints",value:function(){return v.getState().waypoints}},{key:"removeRoutes",value:function(){return this.actions.clearOrigin(),this.actions.clearDestination(),this}},{key:"on",value:function(t,e){return this.actions.eventSubscribe(t,e),this}}]),t}();n.default=y},{"./actions":33,"./controls/inputs":36,"./controls/instructions":37,"./directions_style":39,"./reducers":41,"./utils":42,polyline:10,redux:17,"redux-thunk":11}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=[{id:"directions-route-line-alt",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#bbb","line-width":4},filter:["all",["in","$type","LineString"],["in","route","alternate"]]},{id:"directions-route-line",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":4},filter:["all",["in","$type","LineString"],["in","route","selected"]]},{id:"directions-hover-point-casing",type:"circle",source:"directions",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-hover-point",type:"circle",source:"directions",paint:{"circle-radius":6,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-waypoint-point-casing",type:"circle",source:"directions",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-waypoint-point",type:"circle",source:"directions",paint:{"circle-radius":6,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-origin-point",type:"circle",source:"directions",paint:{"circle-radius":18,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-origin-label",type:"symbol",source:"directions",layout:{"text-field":"A","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-destination-point",type:"circle",source:"directions",paint:{"circle-radius":18,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]},{id:"directions-destination-label",type:"symbol",source:"directions",layout:{"text-field":"B","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]}];n.default=r},{}],40:[function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(t("./directions"));e.exports=r.default},{"./directions":38}],41:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("../constants/action_types.js")),i=function(t){return t&&t.__esModule?t:{default:t}}(t("deep-assign")),o={api:"https://api.mapbox.com/directions/v5/",profile:"driving-traffic",unit:"imperial",proximity:!1,styles:[],controls:{inputs:!0,instructions:!0},geocoder:{},interactive:!0,events:{},origin:{},destination:{},hoverMarker:{},waypoints:[],originQuery:null,destinationQuery:null,originQueryCoordinates:null,destinationQueryCoordinates:null,directions:[],routeIndex:0};n.default=function(){var t=arguments.length<=0||void 0===arguments[0]?o:arguments[0],e=arguments[1];switch(e.type){case r.SET_OPTIONS:return(0,i.default)({},t,e.options);case r.DIRECTIONS_PROFILE:return Object.assign({},t,{profile:e.profile});case r.ORIGIN:return Object.assign({},t,{origin:e.origin,hoverMarker:{}});case r.DESTINATION:return Object.assign({},t,{destination:e.destination,hoverMarker:{}});case r.HOVER_MARKER:return Object.assign({},t,{hoverMarker:e.hoverMarker});case r.WAYPOINTS:return Object.assign({},t,{waypoints:e.waypoints});case r.ORIGIN_QUERY:return Object.assign({},t,{originQuery:e.query});case r.DESTINATION_QUERY:return Object.assign({},t,{destinationQuery:e.query});case r.ORIGIN_FROM_COORDINATES:return Object.assign({},t,{originQueryCoordinates:e.coordinates});case r.DESTINATION_FROM_COORDINATES:return Object.assign({},t,{destinationQueryCoordinates:e.coordinates});case r.ORIGIN_CLEAR:return Object.assign({},t,{origin:{},originQuery:"",waypoints:[],directions:[]});case r.DESTINATION_CLEAR:return Object.assign({},t,{destination:{},destinationQuery:"",waypoints:[],directions:[]});case r.DIRECTIONS:return Object.assign({},t,{directions:e.directions});case r.ROUTE_INDEX:return Object.assign({},t,{routeIndex:e.routeIndex});case r.ERROR:return Object.assign({},t,{error:e.error});default:return t}}},{"../constants/action_types.js":34,"deep-assign":3}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={duration:function(t){var e=Math.floor(t/60),n=Math.floor(e/60);return t%=60,e%=60,0===n&&0===e?t+"s":0===n?e+"min":n+"h "+e+"min"},imperial:function(t){var e=t/1609.344;return e>=100?e.toFixed(0)+"mi":e>=10?e.toFixed(1)+"mi":e>=.1?e.toFixed(2)+"mi":(5280*e).toFixed(0)+"ft"},metric:function(t){return t>=1e5?(t/1e3).toFixed(0)+"km":t>=1e4?(t/1e3).toFixed(1)+"km":t>=100?(t/1e3).toFixed(2)+"km":t.toFixed(0)+"m"}};n.default={format:r,coordinateMatch:function(t,e){return t=t.geometry.coordinates,e=e.geometry.coordinates,t.join()===e.join()||t[0].toFixed(3)===e[0].toFixed(3)&&t[1].toFixed(3)===e[1].toFixed(3)},createPoint:function(t,e){return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:e||{}}},validCoords:function(t){return t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90},wrap:function(t){var e=((t- -180)%360+360)%360-180;return-180===e?180:e}}},{}]},{},[40])(40)});
